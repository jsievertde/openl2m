{% load helpers %}
{% load static %}

<td
  {% if iface.admin_status %}
    {% if iface.oper_status %}
      bgcolor="{{ settings.BGCOLOR_IF_ADMIN_UP_UP }}">
    {% else %}
      bgcolor="{{ settings.BGCOLOR_IF_ADMIN_UP }}">
    {% endif %}
    {{ switch|get_interface_info_links:iface }}
    <a href="{% url 'switches:admin_change' group.id switch.id iface.key 0 %}"
      data-toggle="tooltip"
      title="Click here to Disable {{ iface.name }}"
    {% if request.user.profile.are_you_sure %}
      onclick="return confirm_change('Are you sure you want to DISABLE {{ iface.name }}?')"
    {% endif %}
    >
  {% else %}
    bgcolor="{{ settings.BGCOLOR_IF_ADMIN_DOWN }}">
    {{ switch|get_interface_info_links:iface }}
    <a href="{% url 'switches:admin_change' group.id switch.id iface.key 1 %}"
       data-toggle="tooltip"
       title="Click here to Enable {{ iface.name }}"
    {% if request.user.profile.are_you_sure %}
       onclick="return confirm_change('Are you sure you want to ENABLE {{ iface.name }}?')"
    {% endif %}
    >
  {% endif %}
  {{ iface.name }}</a>
  {% if iface.is_routed %}
    &nbsp;
    <img src="{% static 'img/routed-mode.png' %}"
         alt="Routed Mode Interface"
         data-toggle="tooltip"
         title="Routed Mode Interface">
  {% endif %}
  {% if iface.is_tagged %}
    &nbsp;
    <img src="{% static 'img/trunk.png' %}"
         alt="Tagged/Trunked Interface"
         data-toggle="tooltip"
         title="Tagged/Trunked Interface, tagged vlans {% for vlan_id in iface.vlans %}{{ vlan_id }} {% endfor %}">
  {% endif %}
  {% if iface.lacp_master_index > 0 %}
    &nbsp;
    <img src="{% static 'img/lacp.png' %}"
         alt="LACP Member Interface"
         data-toggle="tooltip"
         title="This interface is a member of LACP interface {{ iface.lacp_master_name }}">
  {% endif %}
  {% if iface.type == IF_TYPE_LAGG %}
    &nbsp;
    <img src="{% static 'img/lacp.png' %}"
         alt="LACP Master Interface"
         data-toggle="tooltip"
         title="This interface is an LACP interface! Members are: {% for if_index, if_name in iface.lacp_members.items %}{{ if_name }} {% endfor %}
          ">
  {% endif %}
  {% if iface.gvrp_enabled %}
    &nbsp;
    <img src="{% static 'img/mvrp.png' %}"
         alt="MVRP or GVRP Enabled on this interface"
         data-toggle="tooltip"
         title="MVRP or GVRP is Enabled on this interface">
  {% endif %}
  {% if iface.voice_vlan %}
    &nbsp;
    <img src="{% static 'img/voice-vlan.png' %}"
         alt="Voice VLAN"
         data-toggle="tooltip"
         title="Voice VLAN {{ iface.voice_vlan }}">
  {% endif %}
  <!-- ifkey = {{ iface.key }}, ifIndex = {{ iface.index }}, port_id = {{ iface.port_id }} -->
</td>
